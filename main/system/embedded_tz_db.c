#include <stdio.h>
#include "embedded_tz_db.h"

/**
 * Timezone alias structure
 * Contains IANA Zone Alias/link and an index to the associated zone.
 **/
typedef struct {
    const char* alias;
    unsigned short zoneIndex; // Index into embedded_tz_db_zones[]
    unsigned char hash;       // 8-bit hash of the alias name
} embeddedTzAlias_t;

static const char* TZ_DATA_VERS = "2025b-01";

#if TZ_DB_USE_SHORT_LIST
static const embeddedTz_t embedded_tz_db_zones[TZ_DB_NUM_ZONES] = {
  {"Etc/GMT+12", "<-12>12"},
  {"Etc/GMT+11", "<-11>11"},
  {"America/Adak", "HST10HDT,M3.2.0,M11.1.0"},
  {"Pacific/Honolulu", "HST10"},
  {"Pacific/Marquesas", "<-0930>9:30"},
  {"America/Anchorage", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"Etc/GMT+9", "<-09>9"},
  {"America/Tijuana", "PST8PDT,M3.2.0,M11.1.0"},
  {"Etc/GMT+8", "<-08>8"},
  {"America/Los_Angeles", "PST8PDT,M3.2.0,M11.1.0"},
  {"America/Phoenix", "MST7"},
  {"America/Chihuahua", "CST6"},
  {"America/Denver", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Whitehorse", "MST7"},
  {"America/Guatemala", "CST6"},
  {"America/Chicago", "CST6CDT,M3.2.0,M11.1.0"},
  {"Pacific/Easter", "<-06>6<-05>,M9.1.6/22,M4.1.6/22"},
  {"America/Mexico_City", "CST6"},
  {"America/Regina", "CST6"},
  {"America/Bogota", "<-05>5"},
  {"America/Cancun", "EST5"},
  {"America/New_York", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Port-au-Prince", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Havana", "CST5CDT,M3.2.0/0,M11.1.0/1"},
  {"America/Indiana/Indianapolis", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Grand_Turk", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Asuncion", "<-03>3"},
  {"America/Halifax", "AST4ADT,M3.2.0,M11.1.0"},
  {"America/Caracas", "<-04>4"},
  {"America/Cuiaba", "<-04>4"},
  {"America/La_Paz", "<-04>4"},
  {"America/Santiago", "<-04>4<-03>,M9.1.6/24,M4.1.6/24"},
  {"America/St_Johns", "NST3:30NDT,M3.2.0,M11.1.0"},
  {"America/Araguaina", "<-03>3"},
  {"America/Sao_Paulo", "<-03>3"},
  {"America/Cayenne", "<-03>3"},
  {"America/Argentina/Buenos_Aires", "<-03>3"},
  {"America/Nuuk", "<-02>2<-01>,M3.5.0/-1,M10.5.0/0"},
  {"America/Montevideo", "<-03>3"},
  {"America/Punta_Arenas", "<-03>3"},
  {"America/Miquelon", "<-03>3<-02>,M3.2.0,M11.1.0"},
  {"America/Bahia", "<-03>3"},
  {"Etc/GMT+2", "<-02>2"},
  {"Atlantic/Azores", "<-01>1<+00>,M3.5.0/0,M10.5.0/1"},
  {"Atlantic/Cape_Verde", "<-01>1"},
  {"Etc/GMT", "GMT0"},
  {"Etc/UTC", "UTC0"},
  {"Europe/London", "GMT0BST,M3.5.0/1,M10.5.0"},
  {"Africa/Abidjan", "GMT0"},
  {"Africa/Sao_Tome", "GMT0"},
  {"Africa/Casablanca", "<+00>0<+01>,0/0,J365/25"},
  {"Europe/Berlin", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Budapest", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Paris", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Warsaw", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Lagos", "WAT-1"},
  {"Europe/Bucharest", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Asia/Beirut", "EET-2EEST,M3.5.0/0,M10.5.0/0"},
  {"Africa/Cairo", "EET-2EEST,M4.5.5/0,M10.5.4/24"},
  {"Europe/Chisinau", "EET-2EEST,M3.5.0,M10.5.0/3"},
  {"Asia/Damascus", "<+03>-3"},
  {"Asia/Hebron", "EET-2EEST,M3.4.4/50,M10.4.4/50"},
  {"Africa/Johannesburg", "SAST-2"},
  {"Europe/Kyiv", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Asia/Jerusalem", "IST-2IDT,M3.4.4/26,M10.5.0"},
  {"Africa/Juba", "CAT-2"},
  {"Europe/Kaliningrad", "EET-2"},
  {"Africa/Khartoum", "CAT-2"},
  {"Africa/Tripoli", "EET-2"},
  {"Africa/Windhoek", "CAT-2"},
  {"Asia/Amman", "<+03>-3"},
  {"Asia/Baghdad", "<+03>-3"},
  {"Europe/Istanbul", "<+03>-3"},
  {"Asia/Riyadh", "<+03>-3"},
  {"Europe/Minsk", "<+03>-3"},
  {"Europe/Moscow", "MSK-3"},
  {"Africa/Nairobi", "EAT-3"},
  {"Europe/Volgograd", "MSK-3"},
  {"Asia/Tehran", "<+0330>-3:30"},
  {"Asia/Dubai", "<+04>-4"},
  {"Europe/Astrakhan", "<+04>-4"},
  {"Asia/Baku", "<+04>-4"},
  {"Europe/Samara", "<+04>-4"},
  {"Indian/Mauritius", "<+04>-4"},
  {"Europe/Saratov", "<+04>-4"},
  {"Asia/Tbilisi", "<+04>-4"},
  {"Asia/Yerevan", "<+04>-4"},
  {"Asia/Kabul", "<+0430>-4:30"},
  {"Asia/Tashkent", "<+05>-5"},
  {"Asia/Yekaterinburg", "<+05>-5"},
  {"Asia/Karachi", "PKT-5"},
  {"Asia/Qyzylorda", "<+05>-5"},
  {"Asia/Kolkata", "IST-5:30"},
  {"Asia/Colombo", "<+0530>-5:30"},
  {"Asia/Kathmandu", "<+0545>-5:45"},
  {"Asia/Almaty", "<+05>-5"},
  {"Asia/Dhaka", "<+06>-6"},
  {"Asia/Omsk", "<+06>-6"},
  {"Asia/Yangon", "<+0630>-6:30"},
  {"Asia/Bangkok", "<+07>-7"},
  {"Asia/Barnaul", "<+07>-7"},
  {"Asia/Hovd", "<+07>-7"},
  {"Asia/Krasnoyarsk", "<+07>-7"},
  {"Asia/Novosibirsk", "<+07>-7"},
  {"Asia/Tomsk", "<+07>-7"},
  {"Asia/Shanghai", "CST-8"},
  {"Asia/Irkutsk", "<+08>-8"},
  {"Asia/Singapore", "<+08>-8"},
  {"Australia/Perth", "AWST-8"},
  {"Asia/Taipei", "CST-8"},
  {"Asia/Ulaanbaatar", "<+08>-8"},
  {"Australia/Eucla", "<+0845>-8:45"},
  {"Asia/Chita", "<+09>-9"},
  {"Asia/Tokyo", "JST-9"},
  {"Asia/Pyongyang", "KST-9"},
  {"Asia/Seoul", "KST-9"},
  {"Asia/Yakutsk", "<+09>-9"},
  {"Australia/Adelaide", "ACST-9:30ACDT,M10.1.0,M4.1.0/3"},
  {"Australia/Darwin", "ACST-9:30"},
  {"Australia/Brisbane", "AEST-10"},
  {"Australia/Sydney", "AEST-10AEDT,M10.1.0,M4.1.0/3"},
  {"Pacific/Port_Moresby", "<+10>-10"},
  {"Australia/Hobart", "AEST-10AEDT,M10.1.0,M4.1.0/3"},
  {"Asia/Vladivostok", "<+10>-10"},
  {"Australia/Lord_Howe", "<+1030>-10:30<+11>-11,M10.1.0,M4.1.0"},
  {"Pacific/Bougainville", "<+11>-11"},
  {"Asia/Srednekolymsk", "<+11>-11"},
  {"Asia/Magadan", "<+11>-11"},
  {"Pacific/Norfolk", "<+11>-11<+12>,M10.1.0,M4.1.0/3"},
  {"Asia/Sakhalin", "<+11>-11"},
  {"Pacific/Guadalcanal", "<+11>-11"},
  {"Asia/Kamchatka", "<+12>-12"},
  {"Pacific/Auckland", "NZST-12NZDT,M9.5.0,M4.1.0/3"},
  {"Etc/GMT-12", "<+12>-12"},
  {"Pacific/Fiji", "<+12>-12"},
  {"Pacific/Chatham", "<+1245>-12:45<+1345>,M9.5.0/2:45,M4.1.0/3:45"},
  {"Etc/GMT-13", "<+13>-13"},
  {"Pacific/Tongatapu", "<+13>-13"},
  {"Pacific/Apia", "<+13>-13"},
  {"Pacific/Kiritimati", "<+14>-14"}
};

/** This hash table allows for faster lookup of the timezone names. Timezones are not in alphabetical order.
 *  Timezone names are converted to lower case and then summed. The 8 bit sum is stored here.
 **/
static const unsigned char embedded_tz_db_hashTable[TZ_DB_NUM_ZONES] = {
  65,
  64,
  146,
  116,
  208,
  169,
  23,
  237,
  22,
  141,
  252,
  177,
  133,
  67,
  178,
  207,
  130,
  158,
  119,
  125,
  121,
  111,
  119,
  112,
  255,
  50,
  97,
  222,
  207,
  102,
  120,
  87,
  105,
  170,
  196,
  228,
  232,
  196,
  59,
  2,
  107,
  246,
  16,
  19,
  141,
  179,
  183,
  73,
  94,
  236,
  142,
  59,
  23,
  222,
  84,
  171,
  128,
  88,
  163,
  19,
  30,
  75,
  155,
  130,
  149,
  55,
  67,
  0,
  152,
  238,
  215,
  136,
  33,
  78,
  225,
  87,
  121,
  132,
  79,
  210,
  124,
  112,
  52,
  133,
  191,
  189,
  199,
  220,
  47,
  73,
  160,
  188,
  180,
  184,
  138,
  85,
  198,
  135,
  89,
  170,
  178,
  126,
  133,
  134,
  251,
  16,
  218,
  149,
  24,
  73,
  73,
  255,
  214,
  3,
  169,
  245,
  217,
  30,
  122,
  59,
  145,
  35,
  117,
  131,
  184,
  255,
  88,
  150,
  249,
  24,
  107,
  114,
  65,
  67,
  160,
  212,
  68,
  209,
  153,
  53
};
#else
//Full List
static const embeddedTz_t embedded_tz_db_zones[TZ_DB_NUM_ZONES] = {
  {"Europe/Andorra", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Asia/Dubai", "<+04>-4"},
  {"Asia/Kabul", "<+0430>-4:30"},
  {"America/Antigua", "AST4"},
  {"America/Anguilla", "AST4"},
  {"Europe/Tirane", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Asia/Yerevan", "<+04>-4"},
  {"Africa/Luanda", "WAT-1"},
  {"Antarctica/McMurdo", "NZST-12NZDT,M9.5.0,M4.1.0/3"},
  {"Antarctica/Casey", "<+08>-8"},
  {"Antarctica/Davis", "<+07>-7"},
  {"Antarctica/DumontDUrville", "<+10>-10"},
  {"Antarctica/Mawson", "<+05>-5"},
  {"Antarctica/Palmer", "<-03>3"},
  {"Antarctica/Rothera", "<-03>3"},
  {"Antarctica/Syowa", "<+03>-3"},
  {"Antarctica/Troll", "<+00>0<+02>-2,M3.5.0/1,M10.5.0/3"},
  {"Antarctica/Vostok", "<+05>-5"},
  {"America/Argentina/Buenos_Aires", "<-03>3"},
  {"America/Argentina/Cordoba", "<-03>3"},
  {"America/Argentina/Salta", "<-03>3"},
  {"America/Argentina/Jujuy", "<-03>3"},
  {"America/Argentina/Tucuman", "<-03>3"},
  {"America/Argentina/Catamarca", "<-03>3"},
  {"America/Argentina/La_Rioja", "<-03>3"},
  {"America/Argentina/San_Juan", "<-03>3"},
  {"America/Argentina/Mendoza", "<-03>3"},
  {"America/Argentina/San_Luis", "<-03>3"},
  {"America/Argentina/Rio_Gallegos", "<-03>3"},
  {"America/Argentina/Ushuaia", "<-03>3"},
  {"Pacific/Pago_Pago", "SST11"},
  {"Europe/Vienna", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Australia/Lord_Howe", "<+1030>-10:30<+11>-11,M10.1.0,M4.1.0"},
  {"Antarctica/Macquarie", "AEST-10AEDT,M10.1.0,M4.1.0/3"},
  {"Australia/Hobart", "AEST-10AEDT,M10.1.0,M4.1.0/3"},
  {"Australia/Melbourne", "AEST-10AEDT,M10.1.0,M4.1.0/3"},
  {"Australia/Sydney", "AEST-10AEDT,M10.1.0,M4.1.0/3"},
  {"Australia/Broken_Hill", "ACST-9:30ACDT,M10.1.0,M4.1.0/3"},
  {"Australia/Brisbane", "AEST-10"},
  {"Australia/Lindeman", "AEST-10"},
  {"Australia/Adelaide", "ACST-9:30ACDT,M10.1.0,M4.1.0/3"},
  {"Australia/Darwin", "ACST-9:30"},
  {"Australia/Perth", "AWST-8"},
  {"Australia/Eucla", "<+0845>-8:45"},
  {"America/Aruba", "AST4"},
  {"Europe/Mariehamn", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Asia/Baku", "<+04>-4"},
  {"Europe/Sarajevo", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/Barbados", "AST4"},
  {"Asia/Dhaka", "<+06>-6"},
  {"Europe/Brussels", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Ouagadougou", "GMT0"},
  {"Europe/Sofia", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Asia/Bahrain", "<+03>-3"},
  {"Africa/Bujumbura", "CAT-2"},
  {"Africa/Porto-Novo", "WAT-1"},
  {"America/St_Barthelemy", "AST4"},
  {"Atlantic/Bermuda", "AST4ADT,M3.2.0,M11.1.0"},
  {"Asia/Brunei", "<+08>-8"},
  {"America/La_Paz", "<-04>4"},
  {"America/Kralendijk", "AST4"},
  {"America/Noronha", "<-02>2"},
  {"America/Belem", "<-03>3"},
  {"America/Fortaleza", "<-03>3"},
  {"America/Recife", "<-03>3"},
  {"America/Araguaina", "<-03>3"},
  {"America/Maceio", "<-03>3"},
  {"America/Bahia", "<-03>3"},
  {"America/Sao_Paulo", "<-03>3"},
  {"America/Campo_Grande", "<-04>4"},
  {"America/Cuiaba", "<-04>4"},
  {"America/Santarem", "<-03>3"},
  {"America/Porto_Velho", "<-04>4"},
  {"America/Boa_Vista", "<-04>4"},
  {"America/Manaus", "<-04>4"},
  {"America/Eirunepe", "<-05>5"},
  {"America/Rio_Branco", "<-05>5"},
  {"America/Nassau", "EST5EDT,M3.2.0,M11.1.0"},
  {"Asia/Thimphu", "<+06>-6"},
  {"Africa/Gaborone", "CAT-2"},
  {"Europe/Minsk", "<+03>-3"},
  {"America/Belize", "CST6"},
  {"America/St_Johns", "NST3:30NDT,M3.2.0,M11.1.0"},
  {"America/Halifax", "AST4ADT,M3.2.0,M11.1.0"},
  {"America/Glace_Bay", "AST4ADT,M3.2.0,M11.1.0"},
  {"America/Moncton", "AST4ADT,M3.2.0,M11.1.0"},
  {"America/Goose_Bay", "AST4ADT,M3.2.0,M11.1.0"},
  {"America/Blanc-Sablon", "AST4"},
  {"America/Toronto", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Iqaluit", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Atikokan", "EST5"},
  {"America/Winnipeg", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Resolute", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Rankin_Inlet", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Regina", "CST6"},
  {"America/Swift_Current", "CST6"},
  {"America/Edmonton", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Cambridge_Bay", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Inuvik", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Creston", "MST7"},
  {"America/Dawson_Creek", "MST7"},
  {"America/Fort_Nelson", "MST7"},
  {"America/Whitehorse", "MST7"},
  {"America/Dawson", "MST7"},
  {"America/Vancouver", "PST8PDT,M3.2.0,M11.1.0"},
  {"Indian/Cocos", "<+0630>-6:30"},
  {"Africa/Kinshasa", "WAT-1"},
  {"Africa/Lubumbashi", "CAT-2"},
  {"Africa/Bangui", "WAT-1"},
  {"Africa/Brazzaville", "WAT-1"},
  {"Europe/Zurich", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Abidjan", "GMT0"},
  {"Pacific/Rarotonga", "<-10>10"},
  {"America/Santiago", "<-04>4<-03>,M9.1.6/24,M4.1.6/24"},
  {"America/Coyhaique", "<-03>3"},
  {"America/Punta_Arenas", "<-03>3"},
  {"Pacific/Easter", "<-06>6<-05>,M9.1.6/22,M4.1.6/22"},
  {"Africa/Douala", "WAT-1"},
  {"Asia/Shanghai", "CST-8"},
  {"Asia/Urumqi", "<+06>-6"},
  {"America/Bogota", "<-05>5"},
  {"America/Costa_Rica", "CST6"},
  {"America/Havana", "CST5CDT,M3.2.0/0,M11.1.0/1"},
  {"Atlantic/Cape_Verde", "<-01>1"},
  {"America/Curacao", "AST4"},
  {"Indian/Christmas", "<+07>-7"},
  {"Asia/Nicosia", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Asia/Famagusta", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Europe/Prague", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Berlin", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Busingen", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Djibouti", "EAT-3"},
  {"Europe/Copenhagen", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/Dominica", "AST4"},
  {"America/Santo_Domingo", "AST4"},
  {"Africa/Algiers", "CET-1"},
  {"America/Guayaquil", "<-05>5"},
  {"Pacific/Galapagos", "<-06>6"},
  {"Europe/Tallinn", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Africa/Cairo", "EET-2EEST,M4.5.5/0,M10.5.4/24"},
  {"Africa/El_Aaiun", "<+00>0<+01>,0/0,J365/25"},
  {"Africa/Asmara", "EAT-3"},
  {"Europe/Madrid", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Ceuta", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Atlantic/Canary", "WET0WEST,M3.5.0/1,M10.5.0"},
  {"Africa/Addis_Ababa", "EAT-3"},
  {"Europe/Helsinki", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Pacific/Fiji", "<+12>-12"},
  {"Atlantic/Stanley", "<-03>3"},
  {"Pacific/Chuuk", "<+10>-10"},
  {"Pacific/Pohnpei", "<+11>-11"},
  {"Pacific/Kosrae", "<+11>-11"},
  {"Atlantic/Faroe", "WET0WEST,M3.5.0/1,M10.5.0"},
  {"Europe/Paris", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Libreville", "WAT-1"},
  {"Europe/London", "GMT0BST,M3.5.0/1,M10.5.0"},
  {"America/Grenada", "AST4"},
  {"Asia/Tbilisi", "<+04>-4"},
  {"America/Cayenne", "<-03>3"},
  {"Europe/Guernsey", "GMT0BST,M3.5.0/1,M10.5.0"},
  {"Africa/Accra", "GMT0"},
  {"Europe/Gibraltar", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/Nuuk", "<-02>2<-01>,M3.5.0/-1,M10.5.0/0"},
  {"America/Danmarkshavn", "GMT0"},
  {"America/Scoresbysund", "<-02>2<-01>,M3.5.0/-1,M10.5.0/0"},
  {"America/Thule", "AST4ADT,M3.2.0,M11.1.0"},
  {"Africa/Banjul", "GMT0"},
  {"Africa/Conakry", "GMT0"},
  {"America/Guadeloupe", "AST4"},
  {"Africa/Malabo", "WAT-1"},
  {"Europe/Athens", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Atlantic/South_Georgia", "<-02>2"},
  {"America/Guatemala", "CST6"},
  {"Pacific/Guam", "ChST-10"},
  {"Africa/Bissau", "GMT0"},
  {"America/Guyana", "<-04>4"},
  {"Asia/Hong_Kong", "HKT-8"},
  {"America/Tegucigalpa", "CST6"},
  {"Europe/Zagreb", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/Port-au-Prince", "EST5EDT,M3.2.0,M11.1.0"},
  {"Europe/Budapest", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Asia/Jakarta", "WIB-7"},
  {"Asia/Pontianak", "WIB-7"},
  {"Asia/Makassar", "WITA-8"},
  {"Asia/Jayapura", "WIT-9"},
  {"Europe/Dublin", "GMT0IST,M3.5.0/1,M10.5.0"},
  {"Asia/Jerusalem", "IST-2IDT,M3.4.4/26,M10.5.0"},
  {"Europe/Isle_of_Man", "GMT0BST,M3.5.0/1,M10.5.0"},
  {"Asia/Kolkata", "IST-5:30"},
  {"Indian/Chagos", "<+06>-6"},
  {"Asia/Baghdad", "<+03>-3"},
  {"Asia/Tehran", "<+0330>-3:30"},
  {"Atlantic/Reykjavik", "GMT0"},
  {"Europe/Rome", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Jersey", "GMT0BST,M3.5.0/1,M10.5.0"},
  {"America/Jamaica", "EST5"},
  {"Asia/Amman", "<+03>-3"},
  {"Asia/Tokyo", "JST-9"},
  {"Africa/Nairobi", "EAT-3"},
  {"Asia/Bishkek", "<+06>-6"},
  {"Asia/Phnom_Penh", "<+07>-7"},
  {"Pacific/Tarawa", "<+12>-12"},
  {"Pacific/Kanton", "<+13>-13"},
  {"Pacific/Kiritimati", "<+14>-14"},
  {"Indian/Comoro", "EAT-3"},
  {"America/St_Kitts", "AST4"},
  {"Asia/Pyongyang", "KST-9"},
  {"Asia/Seoul", "KST-9"},
  {"Asia/Kuwait", "<+03>-3"},
  {"America/Cayman", "EST5"},
  {"Asia/Almaty", "<+05>-5"},
  {"Asia/Qyzylorda", "<+05>-5"},
  {"Asia/Qostanay", "<+05>-5"},
  {"Asia/Aqtobe", "<+05>-5"},
  {"Asia/Aqtau", "<+05>-5"},
  {"Asia/Atyrau", "<+05>-5"},
  {"Asia/Oral", "<+05>-5"},
  {"Asia/Vientiane", "<+07>-7"},
  {"Asia/Beirut", "EET-2EEST,M3.5.0/0,M10.5.0/0"},
  {"America/St_Lucia", "AST4"},
  {"Europe/Vaduz", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Asia/Colombo", "<+0530>-5:30"},
  {"Africa/Monrovia", "GMT0"},
  {"Africa/Maseru", "SAST-2"},
  {"Europe/Vilnius", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Europe/Luxembourg", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Riga", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Africa/Tripoli", "EET-2"},
  {"Africa/Casablanca", "<+00>0<+01>,0/0,J365/25"},
  {"Europe/Monaco", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Chisinau", "EET-2EEST,M3.5.0,M10.5.0/3"},
  {"Europe/Podgorica", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/Marigot", "AST4"},
  {"Indian/Antananarivo", "EAT-3"},
  {"Pacific/Majuro", "<+12>-12"},
  {"Pacific/Kwajalein", "<+12>-12"},
  {"Europe/Skopje", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Bamako", "GMT0"},
  {"Asia/Yangon", "<+0630>-6:30"},
  {"Asia/Ulaanbaatar", "<+08>-8"},
  {"Asia/Hovd", "<+07>-7"},
  {"Asia/Macau", "CST-8"},
  {"Pacific/Saipan", "ChST-10"},
  {"America/Martinique", "AST4"},
  {"Africa/Nouakchott", "GMT0"},
  {"America/Montserrat", "AST4"},
  {"Europe/Malta", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Indian/Mauritius", "<+04>-4"},
  {"Indian/Maldives", "<+05>-5"},
  {"Africa/Blantyre", "CAT-2"},
  {"America/Mexico_City", "CST6"},
  {"America/Cancun", "EST5"},
  {"America/Merida", "CST6"},
  {"America/Monterrey", "CST6"},
  {"America/Matamoros", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Chihuahua", "CST6"},
  {"America/Ciudad_Juarez", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Ojinaga", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Mazatlan", "MST7"},
  {"America/Bahia_Banderas", "CST6"},
  {"America/Hermosillo", "MST7"},
  {"America/Tijuana", "PST8PDT,M3.2.0,M11.1.0"},
  {"Asia/Kuala_Lumpur", "<+08>-8"},
  {"Asia/Kuching", "<+08>-8"},
  {"Africa/Maputo", "CAT-2"},
  {"Africa/Windhoek", "CAT-2"},
  {"Pacific/Noumea", "<+11>-11"},
  {"Africa/Niamey", "WAT-1"},
  {"Pacific/Norfolk", "<+11>-11<+12>,M10.1.0,M4.1.0/3"},
  {"Africa/Lagos", "WAT-1"},
  {"America/Managua", "CST6"},
  {"Europe/Amsterdam", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Oslo", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Asia/Kathmandu", "<+0545>-5:45"},
  {"Pacific/Nauru", "<+12>-12"},
  {"Pacific/Niue", "<-11>11"},
  {"Pacific/Auckland", "NZST-12NZDT,M9.5.0,M4.1.0/3"},
  {"Pacific/Chatham", "<+1245>-12:45<+1345>,M9.5.0/2:45,M4.1.0/3:45"},
  {"Asia/Muscat", "<+04>-4"},
  {"America/Panama", "EST5"},
  {"America/Lima", "<-05>5"},
  {"Pacific/Tahiti", "<-10>10"},
  {"Pacific/Marquesas", "<-0930>9:30"},
  {"Pacific/Gambier", "<-09>9"},
  {"Pacific/Port_Moresby", "<+10>-10"},
  {"Pacific/Bougainville", "<+11>-11"},
  {"Asia/Manila", "PST-8"},
  {"Asia/Karachi", "PKT-5"},
  {"Europe/Warsaw", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/Miquelon", "<-03>3<-02>,M3.2.0,M11.1.0"},
  {"Pacific/Pitcairn", "<-08>8"},
  {"America/Puerto_Rico", "AST4"},
  {"Asia/Gaza", "EET-2EEST,M3.4.4/50,M10.4.4/50"},
  {"Asia/Hebron", "EET-2EEST,M3.4.4/50,M10.4.4/50"},
  {"Europe/Lisbon", "WET0WEST,M3.5.0/1,M10.5.0"},
  {"Atlantic/Madeira", "WET0WEST,M3.5.0/1,M10.5.0"},
  {"Atlantic/Azores", "<-01>1<+00>,M3.5.0/0,M10.5.0/1"},
  {"Pacific/Palau", "<+09>-9"},
  {"America/Asuncion", "<-03>3"},
  {"Asia/Qatar", "<+03>-3"},
  {"Indian/Reunion", "<+04>-4"},
  {"Europe/Bucharest", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Europe/Belgrade", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Kaliningrad", "EET-2"},
  {"Europe/Moscow", "MSK-3"},
  {"Europe/Simferopol", "MSK-3"},
  {"Europe/Kirov", "MSK-3"},
  {"Europe/Volgograd", "MSK-3"},
  {"Europe/Astrakhan", "<+04>-4"},
  {"Europe/Saratov", "<+04>-4"},
  {"Europe/Ulyanovsk", "<+04>-4"},
  {"Europe/Samara", "<+04>-4"},
  {"Asia/Yekaterinburg", "<+05>-5"},
  {"Asia/Omsk", "<+06>-6"},
  {"Asia/Novosibirsk", "<+07>-7"},
  {"Asia/Barnaul", "<+07>-7"},
  {"Asia/Tomsk", "<+07>-7"},
  {"Asia/Novokuznetsk", "<+07>-7"},
  {"Asia/Krasnoyarsk", "<+07>-7"},
  {"Asia/Irkutsk", "<+08>-8"},
  {"Asia/Chita", "<+09>-9"},
  {"Asia/Yakutsk", "<+09>-9"},
  {"Asia/Khandyga", "<+09>-9"},
  {"Asia/Vladivostok", "<+10>-10"},
  {"Asia/Ust-Nera", "<+10>-10"},
  {"Asia/Magadan", "<+11>-11"},
  {"Asia/Sakhalin", "<+11>-11"},
  {"Asia/Srednekolymsk", "<+11>-11"},
  {"Asia/Kamchatka", "<+12>-12"},
  {"Asia/Anadyr", "<+12>-12"},
  {"Africa/Kigali", "CAT-2"},
  {"Asia/Riyadh", "<+03>-3"},
  {"Pacific/Guadalcanal", "<+11>-11"},
  {"Indian/Mahe", "<+04>-4"},
  {"Africa/Khartoum", "CAT-2"},
  {"Europe/Stockholm", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Asia/Singapore", "<+08>-8"},
  {"Atlantic/St_Helena", "GMT0"},
  {"Europe/Ljubljana", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Arctic/Longyearbyen", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Europe/Bratislava", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Freetown", "GMT0"},
  {"Europe/San_Marino", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"Africa/Dakar", "GMT0"},
  {"Africa/Mogadishu", "EAT-3"},
  {"America/Paramaribo", "<-03>3"},
  {"Africa/Juba", "CAT-2"},
  {"Africa/Sao_Tome", "GMT0"},
  {"America/El_Salvador", "CST6"},
  {"America/Lower_Princes", "AST4"},
  {"Asia/Damascus", "<+03>-3"},
  {"Africa/Mbabane", "SAST-2"},
  {"America/Grand_Turk", "EST5EDT,M3.2.0,M11.1.0"},
  {"Africa/Ndjamena", "WAT-1"},
  {"Indian/Kerguelen", "<+05>-5"},
  {"Africa/Lome", "GMT0"},
  {"Asia/Bangkok", "<+07>-7"},
  {"Asia/Dushanbe", "<+05>-5"},
  {"Pacific/Fakaofo", "<+13>-13"},
  {"Asia/Dili", "<+09>-9"},
  {"Asia/Ashgabat", "<+05>-5"},
  {"Africa/Tunis", "CET-1"},
  {"Pacific/Tongatapu", "<+13>-13"},
  {"Europe/Istanbul", "<+03>-3"},
  {"America/Port_of_Spain", "AST4"},
  {"Pacific/Funafuti", "<+12>-12"},
  {"Asia/Taipei", "CST-8"},
  {"Africa/Dar_es_Salaam", "EAT-3"},
  {"Europe/Kyiv", "EET-2EEST,M3.5.0/3,M10.5.0/4"},
  {"Africa/Kampala", "EAT-3"},
  {"Pacific/Midway", "SST11"},
  {"Pacific/Wake", "<+12>-12"},
  {"America/New_York", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Detroit", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Kentucky/Louisville", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Kentucky/Monticello", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Indianapolis", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Vincennes", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Winamac", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Marengo", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Petersburg", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Vevay", "EST5EDT,M3.2.0,M11.1.0"},
  {"America/Chicago", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Tell_City", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Indiana/Knox", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Menominee", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/North_Dakota/Center", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/North_Dakota/New_Salem", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/North_Dakota/Beulah", "CST6CDT,M3.2.0,M11.1.0"},
  {"America/Denver", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Boise", "MST7MDT,M3.2.0,M11.1.0"},
  {"America/Phoenix", "MST7"},
  {"America/Los_Angeles", "PST8PDT,M3.2.0,M11.1.0"},
  {"America/Anchorage", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"America/Juneau", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"America/Sitka", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"America/Metlakatla", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"America/Yakutat", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"America/Nome", "AKST9AKDT,M3.2.0,M11.1.0"},
  {"America/Adak", "HST10HDT,M3.2.0,M11.1.0"},
  {"Pacific/Honolulu", "HST10"},
  {"America/Montevideo", "<-03>3"},
  {"Asia/Samarkand", "<+05>-5"},
  {"Asia/Tashkent", "<+05>-5"},
  {"Europe/Vatican", "CET-1CEST,M3.5.0,M10.5.0/3"},
  {"America/St_Vincent", "AST4"},
  {"America/Caracas", "<-04>4"},
  {"America/Tortola", "AST4"},
  {"America/St_Thomas", "AST4"},
  {"Asia/Ho_Chi_Minh", "<+07>-7"},
  {"Pacific/Efate", "<+11>-11"},
  {"Pacific/Wallis", "<+12>-12"},
  {"Pacific/Apia", "<+13>-13"},
  {"Asia/Aden", "<+03>-3"},
  {"Indian/Mayotte", "EAT-3"},
  {"Africa/Johannesburg", "SAST-2"},
  {"Africa/Lusaka", "CAT-2"},
  {"Africa/Harare", "CAT-2"},
  {"Etc/GMT+12", "<-12>12"},
  {"Etc/GMT+11", "<-11>11"},
  {"Etc/GMT+9", "<-09>9"},
  {"Etc/GMT+8", "<-08>8"},
  {"Etc/GMT+2", "<-02>2"},
  {"Etc/GMT", "GMT0"},
  {"Etc/UTC", "UTC0"},
  {"Etc/GMT-12", "<+12>-12"},
  {"Etc/GMT-13", "<+13>-13"}
};

/** This hash table allows for faster lookup of the timezone names. Timezones are not in alphabetical order.
 *  Timezone names are converted to lower case and then summed. The 8 bit sum is stored here.
 **/
static const unsigned char embedded_tz_db_hashTable[TZ_DB_NUM_ZONES] = {
  166,
  210,
  220,
  234,
  78,
  66,
  199,
  10,
  64,
  94,
  96,
  71,
  222,
  202,
  62,
  124,
  118,
  239,
  232,
  195,
  254,
  32,
  230,
  134,
  42,
  56,
  215,
  71,
  224,
  217,
  171,
  64,
  184,
  1,
  117,
  190,
  145,
  126,
  59,
  61,
  30,
  122,
  24,
  255,
  12,
  113,
  112,
  26,
  63,
  198,
  50,
  53,
  209,
  162,
  98,
  184,
  116,
  95,
  82,
  120,
  32,
  246,
  6,
  201,
  111,
  170,
  111,
  246,
  196,
  225,
  102,
  92,
  178,
  185,
  134,
  94,
  31,
  140,
  204,
  226,
  225,
  124,
  105,
  222,
  152,
  255,
  185,
  173,
  22,
  250,
  83,
  98,
  116,
  255,
  119,
  144,
  101,
  58,
  151,
  255,
  246,
  170,
  67,
  141,
  218,
  185,
  231,
  193,
  11,
  59,
  84,
  94,
  203,
  87,
  201,
  2,
  130,
  11,
  16,
  112,
  125,
  25,
  112,
  141,
  223,
  112,
  179,
  134,
  67,
  59,
  26,
  239,
  215,
  69,
  114,
  124,
  211,
  173,
  177,
  163,
  211,
  10,
  48,
  167,
  253,
  224,
  22,
  160,
  127,
  30,
  241,
  131,
  140,
  222,
  191,
  73,
  211,
  189,
  228,
  49,
  143,
  119,
  196,
  255,
  37,
  35,
  17,
  140,
  44,
  1,
  66,
  239,
  178,
  168,
  28,
  134,
  135,
  135,
  58,
  119,
  23,
  171,
  146,
  32,
  42,
  61,
  149,
  59,
  180,
  23,
  136,
  79,
  79,
  114,
  81,
  199,
  215,
  3,
  121,
  174,
  249,
  126,
  137,
  53,
  49,
  118,
  169,
  245,
  98,
  122,
  85,
  188,
  61,
  73,
  233,
  99,
  123,
  144,
  88,
  85,
  233,
  184,
  0,
  34,
  201,
  9,
  98,
  152,
  142,
  60,
  19,
  119,
  244,
  164,
  140,
  180,
  75,
  0,
  89,
  73,
  126,
  212,
  122,
  64,
  213,
  80,
  206,
  133,
  247,
  246,
  158,
  121,
  115,
  230,
  212,
  177,
  91,
  218,
  89,
  149,
  63,
  237,
  223,
  182,
  43,
  238,
  131,
  24,
  249,
  171,
  219,
  125,
  124,
  138,
  41,
  175,
  65,
  212,
  90,
  111,
  164,
  129,
  208,
  213,
  35,
  255,
  63,
  160,
  84,
  107,
  88,
  172,
  112,
  75,
  70,
  82,
  19,
  17,
  97,
  230,
  162,
  128,
  245,
  67,
  87,
  255,
  234,
  132,
  124,
  191,
  171,
  52,
  73,
  135,
  134,
  178,
  251,
  14,
  133,
  218,
  214,
  217,
  20,
  131,
  252,
  150,
  24,
  88,
  114,
  76,
  6,
  78,
  107,
  61,
  0,
  147,
  149,
  50,
  114,
  180,
  232,
  255,
  230,
  152,
  86,
  31,
  55,
  236,
  141,
  125,
  30,
  91,
  50,
  211,
  100,
  66,
  170,
  23,
  213,
  111,
  8,
  200,
  209,
  33,
  116,
  96,
  73,
  209,
  130,
  108,
  137,
  166,
  111,
  252,
  230,
  212,
  255,
  205,
  228,
  237,
  71,
  47,
  207,
  205,
  196,
  190,
  175,
  233,
  159,
  133,
  19,
  252,
  141,
  169,
  137,
  29,
  33,
  4,
  176,
  146,
  116,
  59,
  127,
  47,
  165,
  62,
  207,
  6,
  211,
  66,
  3,
  138,
  153,
  101,
  165,
  155,
  22,
  8,
  65,
  64,
  23,
  22,
  16,
  179,
  183,
  67,
  68
};
#endif

#if TZ_DB_INCLUDE_ALIAS_LIST
/** Alias table with hash values for fast lookup */
static const embeddedTzAlias_t embedded_tz_db_aliases[TZ_DB_NUM_ALIAS] = {
  { "GMT", 423, 72 },
  { "Australia/ACT", 36, 45 },
  { "Australia/LHI", 32, 50 },
  { "Australia/NSW", 36, 77 },
  { "Australia/North", 41, 32 },
  { "Australia/Queensland", 38, 37 },
  { "Australia/South", 40, 40 },
  { "Australia/Tasmania", 34, 67 },
  { "Australia/Victoria", 35, 86 },
  { "Australia/West", 42, 184 },
  { "Australia/Yancowinna", 37, 44 },
  { "Brazil/Acre", 76, 78 },
  { "Brazil/DeNoronha", 61, 113 },
  { "Brazil/East", 68, 96 },
  { "Brazil/West", 74, 118 },
  { "Canada/Atlantic", 83, 215 },
  { "Canada/Central", 91, 112 },
  { "Canada/Eastern", 88, 121 },
  { "Canada/Mountain", 96, 242 },
  { "Canada/Newfoundland", 82, 140 },
  { "Canada/Pacific", 104, 86 },
  { "Canada/Saskatchewan", 94, 132 },
  { "Canada/Yukon", 102, 189 },
  { "Chile/Continental", 113, 211 },
  { "Chile/EasterIsland", 116, 51 },
  { "Cuba", 122, 155 },
  { "Egypt", 139, 41 },
  { "Eire", 185, 165 },
  { "Etc/GMT+0", 423, 14 },
  { "Etc/GMT-0", 423, 16 },
  { "Etc/GMT0", 423, 227 },
  { "Etc/Greenwich", 423, 39 },
  { "Etc/UCT", 424, 183 },
  { "Etc/Universal", 424, 68 },
  { "Etc/Zulu", 424, 59 },
  { "GB", 155, 201 },
  { "GB-Eire", 155, 155 },
  { "GMT+0", 423, 163 },
  { "GMT-0", 423, 165 },
  { "GMT0", 423, 120 },
  { "Greenwich", 423, 188 },
  { "Hongkong", 176, 91 },
  { "Iran", 191, 170 },
  { "Israel", 186, 128 },
  { "Jamaica", 195, 198 },
  { "Japan", 197, 10 },
  { "Kwajalein", 235, 182 },
  { "Libya", 227, 17 },
  { "Mexico/BajaNorte", 261, 106 },
  { "Mexico/BajaSur", 258, 156 },
  { "Mexico/General", 250, 146 },
  { "NZ", 276, 232 },
  { "NZ-CHAT", 277, 181 },
  { "Navajo", 389, 127 },
  { "PRC", 118, 69 },
  { "Poland", 288, 126 },
  { "Portugal", 294, 110 },
  { "ROC", 366, 68 },
  { "ROK", 207, 76 },
  { "Singapore", 336, 200 },
  { "Turkey", 363, 164 },
  { "UCT", 424, 76 },
  { "US/Alaska", 393, 132 },
  { "US/Aleutian", 399, 106 },
  { "US/Arizona", 391, 11 },
  { "US/Central", 382, 0 },
  { "US/East-Indiana", 376, 197 },
  { "US/Eastern", 372, 9 },
  { "US/Hawaii", 400, 138 },
  { "US/Indiana-Starke", 384, 162 },
  { "US/Michigan", 373, 87 },
  { "US/Mountain", 389, 130 },
  { "US/Pacific", 392, 230 },
  { "US/Samoa", 30, 40 },
  { "UTC", 424, 76 },
  { "Universal", 424, 217 },
  { "W-SU", 304, 140 },
  { "Zulu", 424, 208 },
  { "America/Buenos_Aires", 18, 0 },
  { "America/Catamarca", 23, 158 },
  { "America/Cordoba", 19, 219 },
  { "America/Indianapolis", 376, 252 },
  { "America/Jujuy", 21, 56 },
  { "America/Knox_IN", 384, 247 },
  { "America/Louisville", 374, 73 },
  { "America/Mendoza", 26, 239 },
  { "Pacific/Samoa", 30, 15 },
  { "America/Argentina/ComodRivadavia", 23, 178 },
  { "America/Atka", 399, 162 },
  { "America/Ensenada", 261, 64 },
  { "America/Fort_Wayne", 376, 63 },
  { "America/Montreal", 88, 99 },
  { "America/Nipigon", 88, 245 },
  { "America/Pangnirtung", 89, 174 },
  { "America/Porto_Acre", 76, 47 },
  { "America/Rainy_River", 91, 171 },
  { "America/Rosario", 19, 0 },
  { "America/Santa_Isabel", 261, 231 },
  { "America/Shiprock", 389, 100 },
  { "America/Thunder_Bay", 88, 150 },
  { "America/Yellowknife", 96, 170 },
  { "Asia/Choibalsan", 239, 225 },
  { "Asia/Chongqing", 118, 139 },
  { "Asia/Harbin", 118, 65 },
  { "Asia/Kashgar", 119, 174 },
  { "Asia/Tel_Aviv", 186, 39 },
  { "Australia/Canberra", 36, 51 },
  { "Australia/Currie", 34, 127 },
  { "Europe/Belfast", 155, 160 },
  { "Europe/Tiraspol", 230, 45 },
  { "Europe/Uzhgorod", 368, 49 },
  { "Europe/Zaporozhye", 368, 26 },
  { "Pacific/Enderbury", 202, 206 },
  { "Pacific/Johnston", 400, 113 },
  { "America/Godthab", 162, 218 },
  { "Asia/Ashkhabad", 360, 100 },
  { "Asia/Calcutta", 188, 30 },
  { "Asia/Chungking", 118, 139 },
  { "Asia/Dacca", 49, 185 },
  { "Asia/Istanbul", 363, 47 },
  { "Asia/Katmandu", 273, 34 },
  { "Asia/Macao", 241, 206 },
  { "Asia/Rangoon", 238, 193 },
  { "Asia/Saigon", 409, 78 },
  { "Asia/Thimbu", 78, 86 },
  { "Asia/Ujung_Pandang", 183, 46 },
  { "Asia/Ulan_Bator", 239, 244 },
  { "Atlantic/Faeroe", 152, 241 },
  { "Europe/Kiev", 368, 110 },
  { "Europe/Nicosia", 126, 165 },
  { "Africa/Asmera", 141, 14 },
  { "Africa/Timbuktu", 237, 10 },
  { "America/Coral_Harbour", 90, 100 },
  { "America/Virgin", 408, 144 },
  { "Antarctica/South_Pole", 8, 139 },
  { "Iceland", 192, 208 },
  { "Atlantic/Jan_Mayen", 272, 49 },
  { "Pacific/Truk", 149, 196 },
  { "Pacific/Yap", 149, 72 },
  { "Pacific/Ponape", 150, 129 }
};
#endif


/**
 * Convert to a safe char representation. Ignore case and spaces.
 **/
static char safeChar(char c) {
    if (c == ' ') return '_';
    if ((c >= 'A') && (c <= 'Z')) return c | 0x20;
    return c;
}

/**
 * Create an 8 bit hash of the timezone name.
 * Timezones are not in alphabetical order so the hash table is used to make lookups faster.
 **/
static unsigned char createHash(const char* name) {
    unsigned char hash = 0;
    while (*name != '\0') {
        hash += safeChar(*(name++));
    }
    return hash;
}

/**
 * Basically strcmp, but accounting for spaces that have become underscores
 * @param[in] target - the 0-terminated string on the left hand side of the comparison
 * @param[in] other - the 0-terminated string on the right hand side of the comparison
 * @return > 0 if target comes before other alphabetically,
 *         ==0 if they're the same,
 *         < 0 if other comes before target alphabetically
 *         (we don't expect NULL arguments, but, -1 if either is NULL)
 **/
static int tz_name_cmp(const char* target, const char* other) {
    if (!target || !other) {
        return -1;
    }

    while (*target) {
        if (safeChar(*target) != safeChar(*other)) {
            break;
        }
        target++;
        other++;
    }
    return safeChar(*target) - safeChar(*other);
}


const embeddedTz_t* tz_db_getTimezone(const char* name) {
    unsigned char hash = createHash(name);

    for (int i = 0; i < TZ_DB_NUM_ZONES; i++) {
        if (embedded_tz_db_hashTable[i] == hash) {
            // Also do string comparison to check for hash collisions. 
            if (tz_name_cmp(name, embedded_tz_db_zones[i].name) == 0) {
                return &embedded_tz_db_zones[i];
            }
        }
    }
#if TZ_DB_INCLUDE_ALIAS_LIST
    for (int i = 0; i < TZ_DB_NUM_ALIAS; i++) {
        if (embedded_tz_db_aliases[i].hash == hash) {
            // Also do string comparison to check for hash collisions. 
            if (tz_name_cmp(name, embedded_tz_db_aliases[i].alias) == 0) {
                if (embedded_tz_db_aliases[i].zoneIndex < TZ_DB_NUM_ZONES) {
                    return &embedded_tz_db_zones[embedded_tz_db_aliases[i].zoneIndex];
                }
            }
        }
    }
#endif
    return NULL;          // No match found
}

const char* tz_db_get_posix_str(const char* name) {
    const embeddedTz_t* tz = tz_db_getTimezone(name);
    return tz ? tz->rule : NULL;
}

const char* tz_db_get_version() {
    return TZ_DATA_VERS;
}

const embeddedTz_t* tz_db_get_all_zones() {
    return embedded_tz_db_zones;
}